swagger: "2.0"
info:
  description: Servicio de la cesta de Omnistore
  version: 1.0.0
  title: Omnistore-Cart
schemes:
 - http
 - https
consumes:
 - application/json
produces:
 - application/json
security:
 -
  default: []
paths:
  /session/cart:
    get:
      parameters:
       -
        name: siteId
        in: query
        description: site
        required: false
        type: string
       -
        name: cartId
        in: query
        description: cartId
        required: false
        type: string
       -
        name: locale
        in: query
        description: locale
        required: false
        type: string
       -
        name: subscopes
        in: query
        description: |-
          The subscopes applied to the response

          observations: Add in additionalData the information about the observations

          giftReceipt: Add in additionalData the information about if the gift receipt option has been selected

          miniBasket: Add in cart the information about taxes and expedition time and if it have taxes applied

          taxes: Add in cart the information about taxes if it have taxes applied
        required: false
        type: string
       -
        name: scopes
        in: query
        description: "The scopes applied to the response\n\n items: returns the cart line items\n \n shippingGroups: returns the cart shipping groups\n \n paymentGroups: returns the cart payment groups paymentMethods\n \n orderNumber: returns the codipedi\n  \n shippingPrice: returns the cart shipping price\n  \n billingAddress: returns the cart billing address\n   \n shippingPrime: returns if it is available to buy the shipping prime\n \n shippingMethods: returns the available shipping methods for the cart\n \n validate: validates all products inside the cart\n \n orderDiscounts: return order discounts\n \ngifts: returns the posible gifts\n\ninvoice: returns the invoice mandatory status"
        required: false
        type: string
      responses:
        "200":
          description: Ok la llamada es correcta.
          schema:
            $ref: '#/definitions/cart'
        "400":
          description: La llamada no es correcta.
          schema:
            $ref: '#/definitions/errors'
        "500":
          description: La llamada no es correcta.
          schema:
            $ref: '#/definitions/errors'
      security:
       -
        default: []
      x-auth-type: Application & Application User
      x-throttling-tier: Unlimited
      x-wso2-application-security:
        security-types:
         - oauth2
        optional: false
    post:
      description: Servicio para actualizar el carrito
      consumes:
       - application/json; charset=UTF-8
      parameters:
       -
        name: siteId
        in: query
        description: site
        required: false
        type: string
       -
        name: cartId
        in: query
        description: cartId
        required: false
        type: string
       -
        name: locale
        in: query
        description: locale
        required: false
        type: string
       -
        name: subscopes
        in: query
        description: |-
          The subscopes applied to the response

          observations: Add in additionalData the information about the observations

          giftReceipt: Add in additionalData the information about if the gift receipt option has been selected

          miniBasket: Add in cart the information about taxes and expedition time and if it have taxes applied

          taxes: Add in cart the information about taxes if it have taxes applied
        required: false
        type: string
       -
        name: scopes
        in: query
        description: "\nThe scopes applied to the response:\n\nitems: returns the cart line items\n\nshippingGroups: returns the cart shipping groups\n\npaymentGroups: returns the cart payment groups\n\npaymentMethods: returns the available payment methods\n\norderNumber: returns the codipedi\n\nshippingPrice: returns the cart shipping price\n\nbillingAddress: returns the cart billing address\n\nshippingPrime: returns if it is available to buy the shipping prime\n\nshippingMethods: returns the available shipping methods for the cart\n\noneClickPayment: returns the cart isOneClickPayment\n \nvalidate: validates all products inside the cart"
        required: false
        type: string
       -
        in: body
        name: json
        description: json
        required: true
        schema:
          type: object
          properties:
            line_items:
              type: array
              items:
                $ref: '#/definitions/line_item'
      responses:
        "200":
          description: Ok la llamada es correcta.
          schema:
            $ref: '#/definitions/cart'
        "400":
          description: La llamada no es correcta.
          schema:
            $ref: '#/definitions/errors'
        "500":
          description: La llamada no es correcta.
          schema:
            $ref: '#/definitions/errors'
      security:
       -
        default: []
      x-auth-type: Application & Application User
      x-throttling-tier: Unlimited
      x-wso2-application-security:
        security-types:
         - oauth2
        optional: false
    put:
      description: Servicio para actualizar el carrito
      parameters:
       -
        name: siteId
        in: query
        description: site
        required: false
        type: string
       -
        name: cartId
        in: query
        description: cartId
        required: false
        type: string
       -
        name: locale
        in: query
        description: locale
        required: false
        type: string
       -
        name: subscopes
        in: query
        description: |-
          The subscopes applied to the response

          observations: Add in additionalData the information about the observations

          giftReceipt: Add in additionalData the information about if the gift receipt option has been selected

          miniBasket: Add in cart the information about taxes and expedition time and if it have taxes applied

          taxes: Add in cart the information about taxes if it have taxes applied
        required: false
        type: string
       -
        name: scopes
        in: query
        description: "\nThe scopes applied to the response:\n\nitems: returns the cart line items\n\nshippingGroups: returns the cart shipping groups\n\npaymentGroups: returns the cart payment groups\n\npaymentMethods: returns the available payment methods\n\norderNumber: returns the codipedi\n\nshippingPrice: returns the cart shipping price\n\nbillingAddress: returns the cart billing address\n\nshippingPrime: returns if it is available to buy the shipping prime\n\nshippingMethods: returns the available shipping methods for the cart\n\noneClickPayment: returns the cart isOneClickPayment\n \nvalidate: validates all products inside the cart"
        required: false
        type: string
       -
        in: body
        name: json
        description: json
        required: true
        schema:
          type: object
      responses:
        "200":
          description: Ok la llamada es correcta.
          schema:
            $ref: '#/definitions/cart'
        "400":
          description: La llamada no es correcta.
          schema:
            $ref: '#/definitions/errors'
        "500":
          description: La llamada no es correcta.
          schema:
            $ref: '#/definitions/errors'
      security:
       -
        default: []
      x-auth-type: Application & Application User
      x-throttling-tier: Unlimited
      x-wso2-application-security:
        security-types:
         - oauth2
        optional: false
securityDefinitions:
  default:
    type: oauth2
    authorizationUrl: https://test.com
    flow: implicit
definitions:
  cart:
    type: object
    properties:
      session_confirmation_number:
        type: string
        description: Session confirmation number. To avoid XSRF
      id:
        type: string
        description: order unique identifier
      backend_id:
        type: string
        description: External Order Id for backend systems
      payment_url:
        type: string
        description: PGP URL to redirect to complete payment
      user:
        $ref: '#/definitions/profile'
      info_cookies:
        type: array
        description: the cookies info
        items: {}
      line_items:
        type: array
        description: the items added to the cart
        items: {}
      passive_items:
        type: array
        description: the items of the passive cart
        items: {}
      click_call:
        type: array
        description: click call devices
        items: {}
      click_call_checkout:
        type: array
        description: click call checkout
        items: {}
      click_call_checkout_close:
        type: array
        description: click call checkout close
        items: {}
      gift_promotions:
        type: array
        description: the gift promotions associated to the product
        items:
          $ref: '#/definitions/gift_promotion'
      invoice_status:
        type: string
        description: invoice mandatory status
      invoice_confirmation_data:
        type: object
        description: Invoice data
        additionalProperties: {}
      tax_information_visible:
        type: boolean
        description: Tax information visibility
      available_promotional_coupon:
        type: boolean
        description: Coupon box visibility
      merge:
        type: boolean
        description: true if the order has been merged
      total_price:
        type: string
        description: the order price
      total_shipping_price:
        type: string
        description: the shipping price
      real_shipping_price:
        type: boolean
        description: "true if the shipping price is real, false otherwise"
      time_to_expire_session:
        type: string
        description: time to expire session
      line_discounts:
        type: array
        description: the discounts per line
        items: {}
      eci_card:
        type: object
        description: eci card information
        additionalProperties: {}
      profile_eci_card:
        type: object
        description: eci card information from profile
        additionalProperties: {}
      personal_data:
        type: object
        description: User Personal data information
        additionalProperties: {}
      tax_information:
        type: array
        description: Taxes information
        items: {}
      additional_data:
        type: array
        description: the additional flags to the cart
        items: {}
      billing_address:
        type: object
        description: billing address
        additionalProperties: {}
      shipping_methods:
        type: object
        description: json schema for DeliveryOptions service
        additionalProperties: {}
      guest_email:
        type: string
        description: guest email as anonymous user
      gift_receipt_enabled:
        type: boolean
        description: Return true if the order accepts gift receipt
      shipping_groups:
        type: array
        items:
          type: object
          properties: {}
      payment_groups:
        type: array
        description: information about the payment of the order
        items:
          type: object
          additionalProperties: {}
      state:
        type: string
        description: order state
      available_shipping_prime:
        type: boolean
        description: is available to buy the shippingPrime
      shipping_prime_activated:
        type: boolean
        description: Flag of shipping prime in order activated
      shipping_prime_info:
        type: object
        properties:
          reference:
            type: string
            description: The shipping prime ECI reference
          product_id:
            type: string
            description: The shipping prime product Id
          url_image:
            type: string
            description: The 600x600 image
          title:
            type: string
            description: The product name
          store_id:
            type: string
            description: The store
            minLength: 0
            maxLength: 3
          price:
            type: string
            description: The list price
          sale_price:
            type: string
            description: The sale price
          discount:
            type: number
            description: The discount
          available_shipping_prime:
            type: boolean
            description: Available shipping prime
          prime_info:
            $ref: '#/definitions/primeInfo'
      shipping_prime_infos:
        type: array
        description: the items added to the cart
        items: {}
      one_clickable:
        type: boolean
        description: It's one click payment
      eci_express_centre_id:
        type: string
        description: The ECIExpress centre id from order
      express_delivery:
        type: boolean
        description: If Express Delivery is available
      express_delivery_postal_code:
        type: string
        description: The CP in Express Delivery
      express_delivery_expeditions:
        type: array
        description: The expeditions for Express Delivery
        items:
          type: object
          additionalProperties: {}
      selected_expedition_from_time:
        type: string
        description: Expedition from time
      selected_expedition_to_time:
        type: string
        description: Expedition to time
      order_discounts:
        type: array
        items:
          type: object
          properties:
            discount_type: {}
            description_code:
              type: string
              description: code of discount
            discount_description:
              type: array
              items:
                type: string
            discount_amount:
              type: string
              description: total discount amount
            discount_percentage:
              type: string
              description: total discount percentage
          required:
           - description_code
           - discount_description
           - discount_type
      messages:
        type: array
        items:
          type: object
          properties:
            code:
              type: string
              description: code of message
            description:
              type: string
              description: description of message
            params:
              type: array
              items:
                type: string
                description: params
            type:
              description: the type of the message
      csc_url:
        type: string
        description: URL to return to CSC basket in the case of a csc order.
    title: cart
    description: json schema for the cart service
  hardgood_shipping_group:
    type: object
    required:
     - address
     - commerce_items
     - id
     - price
     - shipping_method
    properties:
      id:
        type: string
        description: the shipping group id
      commerce_items:
        type: array
        description: list of commerce items
        items:
          type: string
          description: id of commerce item
      shipping_method:
        type: string
        description: Must be 'homeDelivery' or 'expressDelivery'
        enum:
         - home_delivery
         - express_delivery
      location_code:
        type: string
        description: place to which the address belongs
      address:
        $ref: '#/definitions/address'
      ship_estimated_delivery:
        type: string
        description: ""
      price:
        type: string
        description: the shipping price
      sale_transaction:
        type: string
        description: the transaction id of the shipping group
      ship_date:
        type: string
        description: the ship date
      ship_date_type:
        type: string
        description: mark to indicate the message to show before ship date
        enum:
         - available
         - delivery
         - delivery_immediate
         - available_before_date
         - delivery_before_date
      is_vpr:
        type: boolean
        description: mark to indicate if the shipping group is vpr
    description: shipping group for home delivery
    additionalProperties: {}
  pickup_shipping_group:
    type: object
    required:
     - commerce_items
     - id
     - price
     - self_collection
     - shipping_method
    properties:
      id:
        type: string
        description: the commerceItem id
      commerce_items:
        type: array
        description: list of commerce items
        items:
          type: string
          description: id of commerce item
      ship_estimated_delivery:
        type: string
        description: ""
        enum:
         - 24hrs
         - 48hrs
         - Other
         - 5d
         - semaphore
      shipping_method:
        type: string
        description: Can be 'pickup_STS' or 'pickup_ECI'
        enum:
         - pickup_STS
         - pickup_ECI
      location_code:
        type: string
        description: place to which the address belongs
      centre:
        $ref: '#/definitions/centre'
      pickup_place:
        type: string
        description: DEP is department and SAC is letter Cart
        enum:
         - DEP
         - SAC
      self_collection:
        type: boolean
        description: The self collection flag
      authorized_user:
        $ref: '#/definitions/user'
      price:
        type: string
        description: the shipping price
      sale_transaction:
        type: string
        description: the transaction id of the shipping group
      ship_date:
        type: string
        description: the ship date
      ship_date_type:
        type: string
        description: mark to indicate the message to show before ship date
        enum:
         - available
         - delivery
         - delivery_immediate
         - available_before_date
         - delivery_before_date
    additionalProperties: {}
  pricing_shipping_group:
    type: object
    required:
     - id
     - price
     - shipping_method
    properties:
      id:
        type: string
        description: the commerceItem id
      shipping_method:
        type: string
        description: Must be 'homeDelivery'
        enum:
         - home_delivery
         - pickup_STS
         - pickup_ECI
         - express_delivery
      location_code:
        type: string
        description: place to which the address belongs
      price:
        type: string
        description: the shipping price
      commerce_items:
        type: array
        description: list of commerce items
        items:
          type: string
          description: id of commerce item
    additionalProperties: {}
  shipping_prime_info:
    type: object
    properties:
      reference:
        type: string
        description: The shipping prime ECI reference
      product_id:
        type: string
        description: The shipping prime product Id
      url_image:
        type: string
        description: The 600x600 image
      title:
        type: string
        description: The product name
      store_id:
        type: string
        description: The store
        minLength: 0
        maxLength: 3
      price:
        type: string
        description: The list price
      sale_price:
        type: string
        description: The sale price
      discount:
        type: number
        description: The discount
      available_shipping_prime:
        type: boolean
        description: Available shipping prime
      prime_info:
        $ref: '#/definitions/primeInfo'
    additionalProperties: {}
  primeInfo:
    type: object
    properties:
      upgrade_date:
        type: string
        description: upgrade end date
      end_date:
        type: string
        description: the end date
      show_update_msg:
        type: boolean
        description: true if we show the update msg
      show_prime_msg:
        type: boolean
        description: true if we show the prime msg
    additionalProperties: {}
  user:
    type: object
    required:
     - first_name
    properties:
      first_name:
        type: string
        description: name of the person to whom the order is directed
      last_name:
        type: string
        description: the last name of the person to whom the order is directed
      second_last_name:
        type: string
        description: the second last name of the person to whom the order is directed
      phone_number:
        type: string
        description: the shopper mobile phone
    additionalProperties: {}
  address:
    type: object
    properties:
      nick_name:
        type: string
        description: "Alias of the address, only for registered user"
      first_name:
        type: string
        description: name of the person to whom the order is directed
      last_name:
        type: string
        description: the last name of the person to whom the order is directed
      second_last_name:
        type: string
        description: the second last name of the person to whom the order is directed
      street_name:
        type: string
        description: the street name of the address
      house_number:
        type: string
        description: the house number of the address
      without_number:
        type: boolean
        description: true if the address is without number
      city:
        type: string
        description: the city of the address
      phone_number:
        type: string
        description: the phone number of the person to whom the order is directed
      flat_stairs_door:
        type: string
        description: the flat/stairs/doors of the address
      postal_code:
        type: string
        description: the postal code of the address
      state:
        type: string
        description: the state of the address
      country:
        description: the name and code of the country
        $ref: '#/definitions/nameCode'
      province:
        description: the name and code of the province
        $ref: '#/definitions/nameCode'
      street_type:
        description: the name and code of the street type
        $ref: '#/definitions/nameCode'
    additionalProperties: {}
  nameCode:
    type: object
    required:
     - code
     - name
    properties:
      name:
        type: string
        description: the name of the field
      code:
        type: string
        description: the code of the field
    additionalProperties: {}
  centre:
    type: object
    properties:
      name:
        type: string
        description: the name of the centre
      street_type:
        type: string
        description: the type of the street of address centre
      street_name:
        type: string
        description: the name of the street of address centre
      street_number:
        type: string
        description: the number of the street of address centre
      postal_code:
        type: string
        description: the postal code of address centre
      locality_name:
        type: string
        description: the locality of address centre
      province:
        type: string
        description: the province of address centre
      phone_number:
        type: string
        description: the phone number of centre
      centre_id:
        type: string
        description: the centre id
      company_id:
        type: string
        description: the company id
      store_code:
        type: string
        description: the store code
      longitude:
        type: number
        description: the longitude of the centre
      latitude:
        type: number
        description: the latitude of the centre
      available_pickup_places:
        type: array
        description: indicate where you can pick up the order in an ECI center
        items: {}
      schedule:
        type: array
        items:
          type: object
          properties:
            day_in_week:
              type: string
              description: the day of the week
            opening_time:
              type: string
              description: the opening time
            closing_time:
              type: string
              description: the closing time
    additionalProperties: {}
  group_type:
    description: the product type
    enum:
     - SINGLE
     - COLLECTION
     - AMBIENT
     - COORDINATED
     - PACK
  image:
    type: object
    properties:
      type:
        type: string
        description: type
      ratio:
        type: number
        description: the image ratio
      title:
        type: string
        description: the image title
      url:
        type: string
        description: the image url
    description: the color image
    additionalProperties: {}
  gift_promotion:
    type: object
    required:
     - promotion_type
    properties:
      id:
        type: string
        description: the promotion id
      name:
        type: string
        description: the promotion name
      condition_link:
        $ref: '#/definitions/condition_link'
      corporativa:
        type: boolean
        description: the corporativa promotion type flag
      exclusive:
        type: boolean
        description: the exclusive promotion flag
      message:
        type: string
        description: the promotion message
      title:
        type: string
        description: the promotion title
      priority:
        type: number
        description: the promotion priority
      start_date:
        type: string
        description: the date the promotion starts
      end_date:
        type: string
        description: the date the promotion finishes
      title_list:
        type: string
        description: the promotion title for PLP
      promotion_type:
        type: string
        description: the promotion type
        default: gift
      description:
        type: string
        description: the promotion description
      url:
        type: string
        description: 'the url promotion '
      window_type:
        type: string
        description: 'type of window to show '
      image_url:
        type: string
        description: the image url promotion
      promo_link:
        $ref: '#/definitions/condition_link'
      image:
        type: object
        description: the promotion image
        additionalProperties: {}
      preview:
        type: string
        description: "resources to show in PDP, values all/none/text"
      number_gift_limit:
        type: number
        description: the max number of gifts to choose
      min_quantity_for_gift:
        type: number
        description: the minimum amount to be able to choose a gift
      products:
        type: array
        description: the promotion associated products
        items:
          type: object
          additionalProperties: {}
    additionalProperties: {}
  line_item:
    type: object
    required:
     - id
     - price
     - reference
     - store_id
     - title
     - type
     - units
    properties:
      type:
        type: string
        description: the item type
      reference:
        type: string
        description: the product reference
      gift_wrap:
        type: boolean
        description: Will the product be wrapped for gift
      id:
        type: string
        description: the commerceItem id
      store_id:
        type: string
        description: the store
        minLength: 0
        maxLength: 3
      units:
        type: integer
        description: the number of products
      url:
        type: string
        description: a link to the product detail
      provider:
        type: string
        description: the product provider
        default: ECI
      provider_name:
        type: string
        description: the product provider Name
        default: ECI
      unit_price:
        type: string
        description: the product price per unit
      unit_sale_price:
        type: string
        description: the product sale price per unit
      price:
        type: string
        description: the price
      discounted_price:
        type: string
        description: "the final price, only used into checkout"
      title:
        type: string
        description: the product title
      color:
        type: string
        description: the color variant
      format:
        type: string
        description: the format variant
      height:
        type: string
        description: the height variant
      sizes:
        type: object
        properties:
          description:
            type: array
            items:
              type: string
          sizes:
            type: array
            items:
              type: object
              properties:
                title:
                  type: string
                sizes:
                  type: array
                  items:
                    type: string
      skin_type:
        type: string
        description: the skin type variant
      url_image:
        type: string
        description: the product image
      image_ratio:
        type: number
        description: the product image ratio
      wrap_available:
        type: boolean
        description: the product can be wrap for gift
      preview_image:
        type: boolean
        description: show preview image for gift
      stock:
        type: string
        description: the stock of the product
      school_id:
        type: string
        description: School code
      cess_information:
        type: object
        description: The information about the available cess
        properties:
          first_text:
            type: string
          second_text:
            type: string
          cess_url:
            type: string
          caption:
            type: string
          service_url:
            type: string
          departament:
            type: string
      validation:
        type: object
        description: ""
        properties:
          commerce_item_id:
            type: string
          original_offer_stock:
            type: number
          alternative_offers:
            type: array
            items:
              type: object
              additionalProperties: {}
      discount:
        type: number
        description: the price discount
        minimum: 0
        maximum: 100
      components:
        type: array
        description: Bundle components
        items: {}
      postal_code:
        type: string
        description: The postal code for VPR and MDE
      location:
        type: string
        description: When the postal code is not enough
      startup:
        type: boolean
        description: Indicator if startup is selected or no
      type_startup:
        type: string
        description: Type of startup
      door_service:
        type: boolean
        description: Indicator if door_service is selected or no
      disposal:
        type: boolean
        description: Indicator if disposal is selected or no
      cost_items:
        type: array
        description: the cost items added to the cart
        items: {}
      gift_items:
        type: array
        description: the gift items added to the cart
        items: {}
      merge:
        type: boolean
        description: Indicator if line item comes from a merge
      product_id:
        type: string
        description: product id
      brand:
        type: string
        description: Brand of the product
      brand_id:
        type: string
        description: Brand id of the product
      range_name:
        type: string
        description: Range of the product
      data_layer:
        type: object
        description: Information for data layer
        properties: {}
      promotions_message:
        type: array
        description: Promotions Message
        items:
          type: string
      attribution:
        type: object
        properties:
          timestamp:
            type: string
            description: Timestamp
          list_name:
            type: string
            description: List Name sent from Moonshine
      promotion_id:
        type: string
        description: "Id financed Pro,"
      quote:
        type: string
        description: Quote of financed promo
      month:
        type: string
        description: Number of months of financed promo
    additionalProperties: {}
  sts_companies:
    type: array
    items: {}
  profile:
    type: object
    required:
     - id
    properties:
      id:
        type: string
        description: the user id
      email:
        type: string
        description: the email user
      status:
        type: number
        description: the user status
      first_name:
        type: string
        description: the first name
      last_name:
        type: string
        description: the last name
      second_last_name:
        type: string
        description: the middle name
      last_order:
        type: string
        description: the last order
      saved_orders:
        type: array
        description: the saved orders
        items:
          type: string
      enable_create_user:
        type: boolean
        description: its possible create an user with the data of the order
      simplified_user:
        type: boolean
        description: true if is an user without homeAddress
      locale:
        type: string
        description: the user locale
    additionalProperties: {}
  merchandising:
    type: object
    properties:
      license:
        type: string
        description: license
      edition_types:
        type: array
        description: the edition types
        items:
          type: string
      category_types:
        type: array
        description: the category types title
        items:
          type: string
    description: the merchandising information
    additionalProperties: {}
  condition_link:
    type: object
    properties:
      title:
        type: string
        description: the link title
      url:
        type: string
        description: the link url
    description: a link to the conditions
    additionalProperties: {}
  errors:
    type: array
    items:
      type: object
      properties:
        invalid_parameters:
          type: string
        missing_parameters:
          type: string
        description:
          type: string
        code:
          type: string
x-wso2-cors:
  corsConfigurationEnabled: false
  accessControlAllowOrigins:
   - '*'
  accessControlAllowCredentials: false
  accessControlAllowHeaders:
   - authorization
   - Access-Control-Allow-Origin
   - Content-Type
   - SOAPAction
  accessControlAllowMethods:
   - GET
   - PUT
   - POST
   - DELETE
   - PATCH
   - OPTIONS
x-wso2-production-endpoints:
  urls:
   - http://apiecommerce.eci.geci:8080/ecommerce
  type: http
x-wso2-sandbox-endpoints:
  urls:
   - http://frontales_hidden_atg.eci.geci:10980/ecommerce/eci
  type: http
x-wso2-basePath: /orders/omnistore/cart/v1/1.0.0
x-wso2-transports:
 - http
 - https
x-wso2-application-security:
  security-types:
   - oauth2
  optional: false
x-wso2-response-cache:
  enabled: false
  cacheTimeoutInSeconds: 300
